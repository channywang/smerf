<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: SmerfItem</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">SmerfItem</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/smerf_item_rb.html">
                app/models/smerf_item.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="SmerfItem.html">SmerfItem</a> class is a base class used by all
other smerf classes and contains shared functionality.
</p>
<p>
Derived classes include:
</p>
<ul>
<li><a href="SmerfFile.html">SmerfFile</a>

</li>
<li><a href="SmerfGroup.html">SmerfGroup</a>

</li>
<li><a href="SmerfQuestion.html">SmerfQuestion</a>

</li>
<li><a href="SmerfAnswer.html">SmerfAnswer</a>

</li>
</ul>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000006">check_for_errors</a>&nbsp;&nbsp;
      <a href="#M000007">decode_data</a>&nbsp;&nbsp;
      <a href="#M000002">init_class_variables</a>&nbsp;&nbsp;
      <a href="#M000001">new</a>&nbsp;&nbsp;
      <a href="#M000003">validate_field</a>&nbsp;&nbsp;
      <a href="#M000004">validate_object_fields</a>&nbsp;&nbsp;
      <a href="#M000005">validate_sub_objects</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">code_unique_for_smerf</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Specifies that the codes for sub items (e.g. questions) must be unique for
the complete form, if this is false then we check only within this item
(e.g. answer codes for a question)

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">object_ident</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
The object_id is unique id for all objects contructed by taking the
owner_ident and combining it with this objects code. For example: group
code 1, object id would be practiceprofile~~1, questions for this group
might have object id practiceprofile~~1~~g1q1

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">owner_ident</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
This is the id of the object that owns this one, nil means that we have
reached the root object, normally the smerffile object. Keeping this
information allows us to walk the object tree to find owners.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000001.html');return false;">
          <span class="method-name">new</span><span class="method-args">(raw_data, sort_order_field, class_code_array, owner_ident)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Class Constructor
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000002.html');return false;">
          <span class="method-name">init_class_variables</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method reloads all our class variables after the form is unserialized
from the DB. As the class variables are not serialized and holds references
to objects we need to load these once all objects have been created.
</p>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000006.html');return false;">
          <span class="method-name">check_for_errors</span><span class="method-args">(errors)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is a small helper method that checks the errors string to see if there
are any errors present, if so we raise an exception
</p>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000007.html');return false;">
          <span class="method-name">decode_data</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method decodes the raw data read in from a YAML file. When defining a
<a href="SmerfItem.html#M000001">new</a> section/level in a YAML file you
do so by specifying a section/level header, e.g. groups:, but there is no
value associated with it, sub items are then defined, i.e. code: xyz. When
the YAML file is loaded the header is loaded into an element array with 0
as the index and the items for the level is loaded into another element
with 1 as the index.
</p>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000003.html');return false;">
          <span class="method-name">validate_field</span><span class="method-args">(hash, field, msg)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
The method takes a hash, a field name and an error message. The method
checks the hash to see if the field exists, it also checks to see if a
value has been specified for the field. If not the supplied error message
or if a empty string was supplied for the msg param then a default error
will be returned.
</p>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000004.html');return false;">
          <span class="method-name">validate_object_fields</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
For each form item a list of fields that can be used in the YAML file to
define the item is defined (see <a href="SmerfGroup.html">SmerfGroup</a>
for example). This method is called to firstly setup a hash that contains
all the fields, it checks that the sort order field is present and then
checks the other fields. When setting up the fields you can specify if the
field is mandatory or requires further validation.
</p>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="SmerfItem.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('SmerfItem.src/M000005.html');return false;">
          <span class="method-name">validate_sub_objects</span><span class="method-args">(object_class, hash, sort_order_field, object_array)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method takes a class name (<a href="SmerfGroup.html">SmerfGroup</a>),
a hash that contains the data read in from the YAML file, the order in
which these sub items should be sorted and array in which to return the
objects created for each sub item.
</p>
<p>
This function validates sub items such as groups, questions, etc. It
creates and object of the specified class and performs the validation on
the contents for each item in the specified hash.
</p>
<p>
For example the smerffile object passes the groups array to this function,
this function creates a <a href="SmerfGroup.html">SmerfGroup</a> object for
each item in the array. It then performs validation for each group and adds
it to the object array which is then used in the Smerf object. The same
thing happens for the questions defined in each group, we create an <a
href="SmerfQuestion.html">SmerfQuestion</a> object for each item passed in
the array by the <a href="SmerfGroup.html">SmerfGroup</a> object.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>